<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta
        http-equiv="X-UA-Compatible"
        content="IE=edge"
    >
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <title>Document</title>
</head>

<body>
    <div>钱：</div>
    <div id="amount">100</div>
    <button id="button">按钮</button>
    <script>
        button.addEventListener(
            'click', (e) => {
                const script = document.createElement('script')
                script.src = `http://localhost:3002/pay`
                document.body.appendChild(script)//将能实现发送跨域请求的script标签插入html
                console.log(document)

                window.callback = (res) => {
                    console.log(res)
                    const { code, data } = res
                    if(code == 200){
                        amount.innerText -= data.money
                    }
                }

                script.onload = () => {
                    delete window.callback
                }
            }
        )
    </script>
</body>

</html>